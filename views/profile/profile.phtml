<?php

declare(strict_types=1);

use Jesperbeisner\Fwstats\DTO\Playtime;
use Jesperbeisner\Fwstats\Model\Player;
use Jesperbeisner\Fwstats\Model\PlayerNameHistory;
use Jesperbeisner\Fwstats\Model\PlayerProfessionHistory;
use Jesperbeisner\Fwstats\Model\PlayerRaceHistory;
use Jesperbeisner\Fwstats\Model\PlayerXpHistory;
use Jesperbeisner\Fwstats\Service\RenderService;

/** @var RenderService $this */
/** @var array<string, mixed> $vars */

/** @var Player $player */
$player = $vars['player'];

/** @var array<string, null|PlayerXpHistory> $weeklyXpChanges */
$weeklyXpChanges = $vars['weeklyXpChanges'];

/** @var array<string, null|Playtime> $weeklyPlaytimes */
$weeklyPlaytimes = $vars['weeklyPlaytimes'];

/** @var Playtime $totalPlaytime */
$totalPlaytime = $vars['totalPlaytime'];

/** @var Playtime $averagePlaytime */
$averagePlaytime = $vars['averagePlaytime'];

/** @var array<PlayerNameHistory> $nameChanges */
$nameChanges = $vars['nameChanges'];

/** @var array<PlayerRaceHistory> $raceChanges */
$raceChanges = $vars['raceChanges'];

/** @var array<PlayerProfessionHistory> $professionChanges */
$professionChanges = $vars['professionChanges'];

$this->setTitle($player->name . ' - ' . $player->world->worldString());

?>
<main class="container mt-0 mb-5">
    <h1 class="is-size-1">
        <a href="https://<?= $player->world->value ?>.freewar.de/freewar/internal/fight.php?action=watchuser&act_user_id=<?= $player->playerId ?>" target="_blank" class="player_profile_link">
            <?= $this->escape($player->name) ?>
        </a>
    </h1>
    <?php require __DIR__ . '/_xp-changes.phtml' ?>
    <?php require __DIR__ . '/_playtimes.phtml' ?>
    <?php require __DIR__ . '/_name-changes.phtml' ?>
    <?php require __DIR__ . '/_race-changes.phtml' ?>
    <?php require __DIR__ . '/_profession-changes.phtml' ?>
</main>
